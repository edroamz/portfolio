@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    min-width: 360px;
    @apply scroll-smooth;
  }

  body {
    @apply bg-grey-0 dark:bg-grey-970 bg-gradient-to-b from-white to-grey-0 dark:from-grey-970 dark:to-grey-970 w-screen overflow-x-hidden text-base;
  }

  h1,
  h2,
  h3,
  h4 {
    @apply text-grey-1000 dark:text-grey-0 font-bold;
  }

  h1 {
    @apply text-4xl md:text-5xl mb-4;
  }

  h2 {
    @apply text-3xl md:text-4xl mb-4;
  }

  h3 {
    @apply text-2xl mb-3;
  }

  p {
    @apply text-grey-950 dark:text-grey-200;
  }
}

@layer components {
  #__next {
    @apply min-h-screen;
  }

  /* Skip to content */
  [data-reach-skip-link] {
    @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
  }

  [data-reach-skip-link]:focus {
    @apply w-auto overflow-visible m-0 whitespace-normal fixed top-[18px] left-7 z-50 h-10 flex items-center underline outline-none px-4 font-medium text-cobalt-dark dark:text-cobalt-light bg-white dark:bg-grey-970 ring-2 ring-cobalt-dark dark:ring-cobalt-light rounded-md;
  }

  /* Tab trigger styles */
  .tab-trigger {
    @apply relative inline-flex;
  }

  .tab-trigger__text {
    @apply font-medium text-lg hover:transition-colors text-grey-500 hover:text-grey-900 dark:text-grey-400 dark:hover:text-grey-50 border-b border-b-transparent px-4 pb-2;
  }

  .tab-trigger__text--first {
    @apply pl-0 pr-4;
  }

  .tab-trigger__text--last {
    @apply pr-0 pl-4;
  }

  .tab-trigger__border {
    @apply absolute h-px bg-transparent left-4 bottom-0 right-4;
  }

  .tab-trigger__border--first {
    @apply left-0;
  }

  .tab-trigger__border--last {
    @apply right-0;
  }

  .tab-trigger[data-state='active'] .tab-trigger__text {
    @apply text-iris hover:bg-transparent hover:text-iris dark:text-iris-light dark:hover:bg-transparent dark:hover:text-iris-light;
  }

  .tab-trigger[data-state='active'] .tab-trigger__border {
    @apply bg-iris dark:bg-iris-light;
  }

  /* Markdown styles */
  .prose {
    @apply w-full text-lg md:max-w-prose mx-auto;
  }

  .prose h2,
  .prose h3,
  .prose h4,
  .prose h5,
  .prose h6 {
    @apply font-semibold;
  }

  .prose h2 {
    @apply pt-16 m-0;
  }

  .prose h3 {
    @apply pt-12 m-0;
  }

  .prose p {
    @apply text-[18px] leading-9 text-grey-950 dark:text-grey-200;
  }

  .prose p strong {
    @apply text-grey-1000 dark:text-grey-100;
  }

  .prose p,
  .prose ul,
  .prose ol,
  .prose pre,
  .prose .rehype-code-title,
  .prose blockquote {
    @apply mt-6;
  }

  .prose blockquote p {
    @apply text-2xl leading-relaxed tracking-normal font-medium text-center text-grey-880 dark:text-grey-150 mx-7;
  }

  .prose ul li,
  .prose ol li {
    @apply text-grey-950 dark:text-grey-200 pl-6;
  }

  .prose > ol,
  .prose > ul {
    @apply space-y-2;
  }

  .prose ol {
    @apply list-decimal list-inside;
  }

  .prose ul {
    @apply list-none;
  }

  .prose ul ul,
  .prose ol ol {
    @apply mt-1 pl-2 space-y-1;
  }

  .prose ul li {
    background-image: url("data:image/svg+xml,%3Csvg width='12' height='1' viewBox='0 0 14 1' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cline y1='0.5' x2='14' y2='0.5' stroke='%235E6AD2'/%3E%3C/svg%3E%0A");
    background-repeat: no-repeat;
    background-position: 0px 0.8em;
  }

  .prose a:not(.permalink-to-header) {
    @apply font-medium text-cobalt-dark hover:text-grey-1000 dark:text-blue-400 dark:hover:text-grey-100 hover:transition-colors duration-200;
  }
}

@layer utilities {
  .flex-1\/2 {
    flex: 1 1 50%;
  }

  .flex-1\/3 {
    flex: 1 1 calc(100% / 3);
  }
}

/* Syntax highlighter styles */
.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
  @apply text-grey-500 dark:text-neutral-400/90;
}

.token.punctuation,
.token.maybe-class-name,
.token.script,
.token.atrule,
.token.parameter {
  @apply text-amber-700 dark:text-amber-400;
}

.token.boolean,
.token.constant,
.token.string,
.token.char,
.token.number,
.token.attr-name,
.token.script.language-javascript,
.token.property,
.token.interpolation {
  @apply text-blue-700 dark:text-blue-300;
}

.token.keyword,
.token.operator,
.token.rule,
.token.unit {
  @apply text-orange-700 dark:text-coral;
}

.token.literal-property,
.token.property-access,
.token.attr-value {
  @apply text-grey-1000 dark:text-grey-200;
}

.token.tag,
.token.selector,
.token.class-name {
  @apply text-lime-700 dark:text-green-400;
}

.token.keyword.module,
.token.method,
.token.function {
  @apply text-purple-700 dark:text-purple-400;
}

pre {
  @apply whitespace-pre-wrap break-words text-base tracking-tight border border-grey-120 dark:border-grey-800 bg-white dark:bg-grey-1000 rounded-lg;
}

code {
  @apply text-base text-grey-1000 dark:text-grey-150 px-2 py-2 bg-grey-80 dark:bg-grey-900 border border-grey-120 dark:border-grey-700 rounded-md mx-1;
}

pre code {
  @apply block text-grey-1000 dark:text-grey-200 p-0 bg-white dark:bg-grey-1000;
  border: initial;
}

code[class*='language-'],
pre[class*='language-'] {
  @apply text-grey-1000 dark:text-grey-200;
}

pre::-webkit-scrollbar {
  display: none;
}

pre {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
  @apply px-5 py-3;
}

.rehype-code-title {
  @apply px-5 py-2 font-bold font-mono text-base tracking-tight text-grey-1000 bg-grey-50 border border-b-0 border-grey-150 rounded-t-lg dark:text-grey-150 dark:border-grey-800 dark:bg-grey-930;
}

.rehype-code-title + pre {
  @apply text-base tracking-tight mt-0 rounded-t-none;
}

.highlight-line {
  /* 
  .pl-22px = px-5 + border-2
      22px = 20px + 2px
  */
  @apply block -mx-6 pl-[22px] bg-grey-50 dark:bg-grey-900 border-l-2 border-blue-700 dark:border-blue-300;
}

.code-line.line-number:not(.highlight-line) {
  display: block;
}

.line-number::before {
  @apply mr-6 text-grey-500 text-right dark:text-neutral-400/90;
  content: attr(line);
}

.permalink-to-header {
  @apply no-underline hover:underline decoration-2 hover:underline-offset-8 after:content-['#'] after:pl-1 after:inline-block after:text-[0.85em] after:text-transparent hover:after:text-grey-500 dark:hover:after:text-grey-400;
}
